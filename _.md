
# 🛡️ LEMP Stack Fortress

Proyek ini bertujuan untuk membangun **LEMP Stack (Linux, Nginx, MySQL, PHP)** yang **aman, stabil, dan siap produksi**, dilengkapi dengan fitur-fitur hardening dan security sesuai standar industri.

---

## 🚀 Tujuan
Membuat server web dengan Nginx, PHP, dan MariaDB yang:
- Aman dari serangan umum (brute-force, exploit dasar)
- Terlindungi dengan firewall dan IDS ringan
- Sudah dilengkapi SSL gratis dari Let's Encrypt
- Bisa digunakan untuk deploy aplikasi PHP secara production-ready

---

## 🧱 Teknologi yang Digunakan

| Komponen | Fungsi |
|----------|--------|
| **Ubuntu Server 22.04** | OS dasar |
| **Nginx** | Web server |
| **MariaDB** | Database |
| **PHP 8.1+** | Backend |
| **Certbot** | SSL dari Let's Encrypt |
| **UFW** | Firewall |
| **Fail2ban** | IDS brute-force |
| **Cron + Logrotate** | Maintenance & Log manajemen |
| **Lynis** | Audit keamanan sistem |

---

## 🔧 Langkah-langkah Instalasi

### 1. Persiapan Server
```bash
sudo apt update && sudo apt upgrade -y
adduser fortressadmin
usermod -aG sudo fortressadmin
```

### 2. SSH Hardening
Edit `/etc/ssh/sshd_config`:
```bash
Port 2222
PermitRootLogin no
PasswordAuthentication no
```
Lalu restart SSH:
```bash
sudo systemctl restart sshd
```

### 3. Install LEMP Stack
```bash
sudo apt install nginx mariadb-server php-fpm php-mysql -y
sudo mysql_secure_installation
```

### 4. Konfigurasi Virtual Host Nginx
```nginx
server {
    listen 80;
    server_name fortress.local;
    root /var/www/fortress.local;
    index index.php index.html;

    location / {
        try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    }
}
```
Aktifkan:
```bash
sudo ln -s /etc/nginx/sites-available/fortress.local /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx
```

### 5. Setup SSL (HTTPS)
```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d fortress.local
```

### 6. Firewall dan IDS
```bash
sudo apt install ufw fail2ban -y
sudo ufw allow 2222/tcp
sudo ufw allow 'Nginx Full'
sudo ufw enable
```

### 7. Hardening PHP
Edit `/etc/php/8.1/fpm/php.ini`:
```ini
expose_php = Off
disable_functions = exec,passthru,shell_exec,system
display_errors = Off
```

### 8. Otomatisasi Maintenance
Tambahkan ke crontab (`sudo crontab -e`):
```cron
0 2 * * * apt update && apt upgrade -y
0 3 * * * certbot renew --quiet
```

### 9. Audit Keamanan
```bash
sudo apt install lynis -y
sudo lynis audit system
```

---

## 📁 Struktur Folder Penting

- `/var/www/fortress.local/` – Source code
- `/etc/nginx/sites-available/` – Konfigurasi Nginx
- `/etc/php/` – Konfigurasi PHP
- `/etc/mysql/` – Database config
- `/etc/letsencrypt/` – Sertifikat SSL
- `/var/log/nginx/` – Log akses/error

---

## ✅ Yang Dipelajari

- Konfigurasi LEMP stack dari nol
- Security hardening Linux server
- SSL HTTPS dengan Certbot
- Firewall + Fail2ban
- Logging & automation

---

## 📌 Tips Tambahan

- Gunakan DNS lokal atau `/etc/hosts` untuk `fortress.local`
- Simpan backup konfigurasi
- Jangan lupa monitoring beban server dengan `htop` atau `glances`

---

> Proyek ini cocok untuk dijadikan portofolio SysAdmin tingkat menengah sampai lanjut. Bisa dikembangkan lagi dengan Docker, CI/CD, atau WordPress Hosting!
